{% extends "base.html" %}

{% block content %}
  <style>
h1 {
  margin-bottom: 1em;
}
h1 small {
  color: #777;
  display: block;
  text-align: right;
  font-weight: normal;
}

input {
  padding: 2px 5px;
}
input[type=checkbox] {
  flex-shrink: 0;
}
input[type=text], input[type=email] {
  box-sizing: border-box;
  width: 100%;
}
.row {
  display: flex;
  align-items: baseline;
  margin: 0 0 12px;
}
.boks {
  flex-grow: 1;
  margin: 10px;
}
.boks label {
  display: block;
  font-size: 12pt;
}
.f-address textarea {
  height: 2em;
}
.f-alt_address {
  opacity: 0.6;
}
.f-alt_address textarea {
  height: 4em;
}

.f-num_issues input[type=number] {
  width: 2em;
}
.f-submit {
  text-align: right;
}
.f-submit input {
  font-size: 16pt;
  padding: 10px 20px;
}

.f-want_tg label {
  color: #666;
  margin-left: 0.5em;
}
.f-want_tg :checked + label {
  color: #000;
}

.errorlist {
  font-size: 10.5pt;
  margin: 0;
  padding: 4px;
  background-color: rgb(255,190,190);
  border-radius: 5px;
}
.errorlist li {
  margin: 0;
  display: block;
}

.f-shown_name {
  max-height: 100px;
  transition: 1s max-height;
  overflow: hidden;
}
.f-shown_name.hidden {
  max-height: 0;
  transition: 0.4s max-height;
}
  </style>

  <h1>
    Livet er æve, og evig er ordet
    <small>Norsk Ordbok 1930&ndash;2015</small>
  </h1>

  <form class=entry action=. method=post>
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div class="row f-num_issues">
      <label for={{ form.num_issues.id_for_label }}>Eg/me vil gjerne tinge
      <input type=number value="{{ form.num_issues.value }}"
          min=1 max=99 id={{ form.num_issues.auto_id }}
          name={{ form.num_issues.name }}>
      {{ form.num_issues.errors }}
        eksemplar av festskriftet (kr 299,00)</label>
    </div>

    <div class="row f-want_tg">
      {{ form.want_tg }}
      {{ form.want_tg.errors }}
      <label for=id_want_tg>Eg/me ønskjer å stå på Tabula Gratulatoria 
      (helsingslista)</label>
    </div>

    <div class="row f-name">
      <div class=boks>
        <label>Førenamn</label>
        {{ form.first_name }}
        {{ form.first_name.errors }}
      </div>
      <div class=boks>
        <label>Etternamn</label>
        {{ form.last_name }}
        {{ form.last_name.errors }}
      </div>
    </div>

    <div class="row f-shown_name">
      <div class=boks>
        <label>Namn i Tabula Gratulatoria
        <small style="color: #555; margin-left: 0.5em; font-size: 10pt">
          (t.d. «Ola Nordmann» eller
          «Ola og Kari Nordmann»)</small>
        </label>
        {{ form.shown_name }}
        {{ form.shown_name.errors }}
      </div>
    </div>

    <div class="row f-address">
      <div class=boks>
        <label>Adresse</label>
        {{ form.address }}
        {{ form.address.errors }}
      </div>
      <div class=boks>
        <label>Postnummer</label>
        {{ form.place }}
        {{ form.place.errors }}
      </div>
    </div>

    <div class="row">
      <div class=boks>
        <label>E-post</label>
        {{ form.email }}
        {{ form.email.errors }}
      </div>
    </div>

    <div class="row f-alt_address">
      <div class=boks>
        <label>Anna (t.d. alternativ adresse / fakturaadresse / adresse i utlandet)</label>
        {{ form.alt_address }}
        {{ form.alt_address.errors }}
      </div>
    </div>

    <div class="row">
      <small>
        Ta kontakt med redaksjonen, dersom du lurer på noko:
        <a href=mailto:norsk.ordbok@nynorsk.no>norsk.ordbok@nynorsk.no</a>
      </small>
    </div>

    <div class="f-submit">
      <input type=submit value="Legg til">
    </div>
  </form>

<script>
function update_shown_name() {
  var name = id_first_name.value + ' ' + id_last_name.value;
  id_shown_name.placeholder = name;
}
id_last_name.oninput = update_shown_name;
id_first_name.oninput = update_shown_name;

function update_want_tg() {
  document.querySelector('.f-shown_name').classList.toggle(
      'hidden', !id_want_tg.checked);
}
id_want_tg.onchange = update_want_tg;

</script>
{% endblock %}
